import e,{isValidElement as t,cloneElement as r,createElement as n,Fragment as o}from"react";const s=e=>"string"==typeof e,a=e=>"function"==typeof e,c=e=>!!e&&"object"==typeof e,i=e=>"boolean"==typeof e,p=e=>"symbol"==typeof e,l=e=>t(e)?r(e):n(e),u=(e,t,r)=>"leave"===r?s(e)&&t||e:t,f=(e,t)=>{let r,n,o=e;c(e)&&({type:o,props:n,render:r}=e);let s=o||r;return c(s)&&!t&&([s]=f(s,t)),[s,n||s.defaultProps||{}]},v=new WeakMap,y=new Map,d=(e,t)=>{if(p(e)||p(t))return[];const r=s(e),n=s(t),o=r?`c-${e}`:e,a=n?`a-${t}`:t;return y.has(o)||y.set(o,r?new String(e):e),y.has(a)||y.set(a,n?new String(t):t),[y.get(o),y.get(a)]},g=(e,t,r,n)=>{const[o,s]=d(e,t);if(o&&s&&r){const e=v.get(o);if(e){const t=e.get(s);t?t[r]=n:e.set(s,{[r]:n})}else{const e=new WeakMap;e.set(s,{[r]:n}),v.set(o,e)}}return n},m=(e,t,r)=>{var n,o;const[s,a]=d(e,t);return null===(o=null===(n=v.get(s))||void 0===n?void 0:n.get(a))||void 0===o?void 0:o[r]},w=(t,r,s)=>{const{strategy:i,recursive:p}=s;return function(...l){var f;const v=null===(f=null==t?void 0:t.apply)||void 0===f?void 0:f.call(t,this,l),y=c(v),d=y?r:()=>e.createElement(o,null,v),{props:g,type:m=d}=y?v:{props:l[0]};return a(m)&&p?e.createElement(b,{component:n(m,g),as:r,options:s}):n(u(m,r,i),g)}},h=(t,r,n)=>{const{strategy:o="wrap",recursive:s=!0,cache:c=!0,overwriteProps:p}=n||{};if(!t&&!r)return null;if(!t||i(t))return l(r);if(!r||i(r))return l(t);const v=c?o+s:"",[y,d]=f(t,!1),[h,b]=f(r,!0),[A,E]=((e,t,r)=>{const n=a(e)?e(t,r):null;return Array.isArray(n)?n:[t,r]})(p,d,b),M=c&&m(y,h,v)||g(y,h,v,((e,t,r)=>{var n;const o=null===(n=e.prototype)||void 0===n?void 0:n.isReactComponent,s=a(e);if(o){const n=`${e.constructor.name}#As`,o={[n]:class extends e{}}[n],s=o.prototype;return s.render=w(s.render,t,r),o}return s?w(e,t,r):u(e,t,r.strategy)})(y,h,{strategy:o,recursive:s,cache:c}));return e.createElement(M,Object.assign({},A,E))},b=({component:e,as:t,options:r})=>h(e,t,r);export{b as As,b as default,h as transform};
